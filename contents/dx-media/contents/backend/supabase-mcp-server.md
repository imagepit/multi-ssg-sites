---
title: "Supabase MCP Server登場：AI開発ツールとデータベースが直接つながる新時代"
slug: "supabase-mcp-server"
date: "2025-04-08"
categories: ["バックエンド"]
tags: ["Supabase", "MCP", "AI", "データベース", "開発効率化", "Postgres", "Cursor", "Claude", "LLM", "ツール連携"]
status: "publish"
description: "Supabase MCP ServerはAIツールとデータベースを直接連携する新機能。CursorやClaudeからSupabaseに直接アクセスし、テーブル管理やデータ操作を実行可能。セットアップ方法と活用例を紹介。"
---
## はじめに：データベース操作を変革するMCPとは

Supabaseは2025年4月初旬、正式に「Supabase MCP Server」をリリースしました。これによりCursorやClaudeなどのAIツールからSupabaseのデータベース機能に直接アクセスできるようになります。

MCP（Model Context Protocol）とは、大規模言語モデル（LLM）とプラットフォームの間の標準化された通信方法です。このプロトコルにより、AIツールはSupabaseのデータベースに直接接続し、テーブルの管理、データの取得・更新、設定情報の取得、クエリの実行など、さまざまな操作を実行できるようになりました。

本記事では、Supabase MCP Serverの機能、セットアップ方法、導入メリット、そして今後の展望について解説します。

## Supabase MCP Serverの主要機能

Supabase MCP Serverは、20以上のツール（機能）を提供し、これらはSupabaseの多様な機能にアクセスするための「能力」として機能します。

### 主要な機能一覧

1. **テーブル設計と管理**
   - マイグレーション追跡によるテーブル設計
   - スキーマの変更と管理

2. **データ操作**
   - SQLクエリによるデータ取得とレポート作成
   - データの挿入・更新・削除

3. **開発環境の管理**
   - 開発用データベースブランチの作成（実験的機能）
   - ブランチの統合と管理

4. **プロジェクト管理**
   - 設定情報の取得
   - 新規Supabaseプロジェクトの作成
   - プロジェクトの一時停止と復元

5. **デバッグと監視**
   - ログの取得によるデバッグ支援
   - データベースの状態確認

6. **型情報の生成**
   - データベースのスキーマに基づいたTypescript型定義の生成

これらの機能により、AIツールからデータベース操作ができるだけでなく、開発全体のワークフローを効率化できます。

## セットアップ方法：AIクライアントとの接続

Supabase MCP Serverは、多くのAIクライアントで使用できます。以下は基本的なセットアップ手順です。

### JSONによる設定例

```json
{
  "mcpServers": {
    "supabase": {
      "command": "npx",
      "args": [
        "-y",
        "@supabase/mcp-server-supabase@latest",
        "--access-token",
        "<personal-access-token>"
      ]
    }
  }
}
```

この設定ファイルは`.cursor/mcp.json`のような形で保存します。`<personal-access-token>`の部分には、Supabaseアカウントで生成した個人アクセストークン（PAT）を指定します。このトークンがMCP ServerをSupabaseアカウントと認証します。

### 各クライアント向けのセットアップ

1. **Cursor**
   - `.cursor/mcp.json`にSupabase MCP Server設定を追加

2. **Claude Desktop**
   - MCP設定ファイルに上記のJSON設定を追加

3. **Cline**
   - MCPマーケットプレイスから直接インストール可能

4. **Windsurf**
   - 設定画面からSupabase MCPを追加

Windowsユーザーの場合は、`"command": "cmd /c npx"`のように設定を調整する必要があります。詳しい手順は各クライアントのドキュメントを参照してください。

## MCPプロトコルの仕組みと意義

### ツール呼び出しの標準化

今日の多くの大規模言語モデル（LLM）は「ツール呼び出し」機能をサポートしています。これは、会話の文脈に基づいてモデルが開発者が提供したツール（例：`get_weather`）を呼び出せる機能です。

開発者はLLMに利用可能なツールとそのパラメータを示すJSONスキーマを提供します：

```json
{
  "name": "get_weather",
  "description": "特定の場所の現在の天気を取得する",
  "parameters": {
    "type": "object",
    "properties": {
      "location": {
        "type": "string",
        "description": "都市名と国/地域、例：'東京, 日本'または'Paris, France'"
      }
    },
    "required": ["location"]
  }
}
```

このJSONスキーマ形式は多くのLLMで標準化されていますが、各ツールの実装は標準化されていません。開発者は`get_weather`ツール呼び出しを天気APIと連携させる実装を自分で作成する必要があります。

そのため、開発者はプロジェクトやアプリケーション間でツール実装を重複させることが多く、エンドユーザーは開発者が選んだツールしか使用できませんでした。プラグインスタイルのエコシステムは存在しませんでした。

### MCPによる標準化の実現

MCPはこの問題を解決するために、ツールエコシステムを標準化します。クライアント（例：Cursor）とツール提供者（例：Supabase）の間の共通プロトコルを作成し、両者を切り離します。

Cursorは単にMCP仕様のクライアント側を実装するだけで、同じくMCPを実装するどのサーバーとも連携できます。これにより、CursorなどのAIアプリはユーザーが独自のツールを持ち込めるようになり、そのツールがMCPを実装していれば利用可能になります。

### リソースとプロンプトの活用

MCPはツール呼び出し以外にも、リソースとプロンプトという2つのプリミティブを含んでいます：

1. **リソース**：サーバーが任意のデータやコンテンツを公開し、クライアントがそれを読み取ってLLMのコンテキストとして使用できます。例えば：
   - ファイル内容
   - データベースレコード
   - APIレスポンス
   - システムのライブデータ
   - スクリーンショットや画像
   - ログファイル

2. **プロンプト**：サーバーが再利用可能なプロンプトテンプレートを定義し、クライアントがユーザーとLLMに提示できます。これにより、サーバーはLLMがサービスと対話する際のカスタム指示やベストプラクティスを定義できます。

現在、ほとんどのクライアントはツールプリミティブのみをサポートしていますが、今後リソースやプロンプトの採用が進むことでSupabase MCP Server体験がさらに向上することが期待されます。

## 導入による開発体験の変化

Supabase MCP Serverを導入することで、開発ワークフローはどのように変わるのでしょうか？

### データベース設計時の変化

以前は、データベース設計をAIアシスタントに相談した場合、AIはスキーマのアイデアを提案できても、実際にそれを実装するには開発者がSupabaseダッシュボードに移動し、手動でテーブルを作成・設定する必要がありました。

MCP Serverの導入により、AIアシスタントに「ユーザー情報を管理するテーブルが必要」と伝えるだけで、AIはSQL文（例：`CREATE TABLE`）を生成し、マイグレーションファイルを作成して、ローカルのPostgreSQLデータベースに直接適用できるようになりました。

### データフェッチとクエリ最適化

開発者がデータ取得のロジックを実装する際も、AIアシスタントは単に提案するだけでなく、実際にデータベースに対してクエリを実行してデータ構造を確認し、最適化された実装を提供できるようになりました。

例えば、パフォーマンスが懸念される複雑なクエリがある場合、AIはそのクエリを実行してEXPLAINプランを分析し、インデックスの追加や結合方法の変更などを提案し、実際に適用することができます。

### セキュリティと行レベルセキュリティ（RLS）の設定

Row Level Security（RLS）ポリシーの設定は、Supabaseの重要な機能ですが、正しく設定するには理解が必要です。

MCP Serverを使用すると、AIが「このテーブルは特定のユーザーに制限する必要がある」という指示を受け取った場合、安全で正確なRLSポリシーを自動的に生成し、実装することができます。

### 開発ブランチとテスト環境

Supabaseはデータベースブランチングをサポートしており、開発者は新機能を設計する際に別々の開発データベースをスピンアップし、準備ができたらマージすることができます。

MCP Serverを使えば、AIアシスタントはブランチの作成から管理、マージまでのプロセス全体を支援できます。何か問題が発生した場合でも、ブランチを以前のバージョンに簡単にリセットして続行できます。

## 今後の展望：Supabase MCP Serverのロードマップ

Supabase開発チームは、MCP ServerがAIビルダーの世界で大きな可能性を持っていると考え、継続的な投資を行っています。以下は今後のロードマップに含まれる機能です。

### 1. Edge Function管理

Supabase Edge Functionsは、ユーザーに最も近いエッジネットワークからカスタムサーバーサイドコードを実行できる機能です。最近、Supabaseダッシュボードから直接Edge Functionsを作成・デプロイする機能が発表されました。

今後は、お気に入りのAIアシスタントからも直接Edge Functionsを作成・デプロイできるようになる予定です。

### 2. ネイティブ認証

最新のMCP仕様（執筆時点で2025-03-26）には、公式の認証サポートが含まれています。これにより、現在のように手動で個人アクセストークンを作成してサーバーに提供する代わりに、標準的なOAuth 2ログインフローを使用してSupabaseで認証できるようになります。このフローは次のようになります：

1. AIアプリ/IDEにSupabase MCPを接続
2. AIアプリがブラウザウィンドウを開き、そこでSupabaseに直接ログイン
3. ログイン成功後、AIアプリに戻り、完全に認証された状態になる

これは、現在のアプリで見られる他の「Xでログイン」OAuthフローと同様で、MCP Serverセットアップ体験を簡素化し、Supabaseアカウントへのより細かいアクセス制御を提供することが期待されます。

### 3. スキーマ探索機能の向上

AIを使用してデータベースを設計する際、LLMに既存のスキーマへのアクセスを提供して、変更（例：`alter table`）を実行する際に正確なSQLを把握できるようにすることが重要です。

現在はテーブル一覧を取得する`list_tables`ツールのみが提供されていますが、ビュー、トリガー、関数、ポリシーなどの他のデータベースオブジェクトも利用できるようにする予定です。

現在、LLMがこれらの他のオブジェクトにアクセスする必要がある場合、一般的な`execute_sql`ツールを実行して`information_schema`からそれらを取得できます。例えば、データベース内のすべてのトリガーを取得するには、LLMは次のようなクエリを実行できます：

```sql
select
  event_object_schema as schema,
  event_object_table as table,
  trigger_name,
  event_manipulation as event,
  action_statement as definition
from
  information_schema.triggers
order by
  event_object_schema, event_object_table;
```

これは通常機能しますが、LLMが`information_schema`テーブルの正確な構造を知っている必要があり、冗長なSQLクエリによって多くのトークンが消費され、結果を解析する際にエラーが発生する可能性があります。Supabase開発チームは、より構造化された簡潔なクエリ方法が検出性を向上させ、過剰なトークン使用を削減できると考えています。

### 4. より強力な保護機能

一部のユーザーはAIをデータベースに対して_少し信頼しすぎる_傾向があります。Supabaseはデータベースブランチングをサポートしており、新機能を設計する際に別々の開発データベースをスピンアップし、準備ができたらマージすることができます。これにより、何か問題が発生した場合でも、ブランチを以前のバージョンに簡単にリセットして続行できます。

Supabase MCP Serverは現在もブランチングをサポートしていますが、破壊的な操作を自動検出し、実行前に確認を要求するなどの追加の保護機能を追加することを検討しています。

## Supabase MCP Serverを始めるには

Supabase MCP Serverは、AIツールとデータベース間のギャップを埋め、ツール間の切り替えではなく構築に集中できるように設計されています。

MCPプロトコルは、長時間の接続を必要とせず完全にステートレスなサーバーをサポートする新しいStreamable HTTPトランスポートなどの提案とともに進化しています。Supabase開発チームはこれらの開発を注視し、Supabase MCP体験にどのように役立つかを評価しています。

問題が発生した場合や新しいツールの追加アイデアがある場合は、GitHubリポジトリでIssueを開いてください。特にスキーマ探索、データベースブランチング、およびその他の安全機能に関する体験について、Supabaseチームは保護機能を改良していく上でフィードバックを求めています。

最新の更新情報とSupabase MCPで構築できるものの例については、公式ドキュメントをご覧ください。

## まとめ：AIとデータベースの連携が生み出す可能性

Supabase MCP Serverの登場は、AIツールとデータベースの連携に新たな可能性をもたらします。これまでは別々のワークフローとして存在していたデータベース設計、クエリ最適化、セキュリティ設定などの作業が、AIアシスタントとの自然な会話の中で完結できるようになります。

この変化は単に開発の効率化にとどまらず、開発者がより創造的な問題解決に集中できる環境を提供します。特に、データベース操作に不慣れな開発者や、プロトタイピングを高速に行いたいチームにとって、大きな価値をもたらすでしょう。

今後、MCPプロトコルがさらに進化し、AIツールとバックエンドサービスの連携が強化されることで、ソフトウェア開発の風景は大きく変わっていくことが期待されます。Supabase MCP Serverはその先駆けとなる技術であり、AIとデータベースの橋渡しをする重要な役割を担っています。

---

## 参考資料

Supabase公式ブログ「Supabase MCP Server」(2025年4月4日)
https://supabase.com/blog/mcp-server

Supabase MCP Server GitHub リポジトリ
https://github.com/supabase/supabase-mcp-server

Model Context Protocol 公式ドキュメント
https://modelcontextprotocol.github.io/

「How Cursor, Supabase, and MCP Transform Software Development」(Takafumi Endo, 2025年3月5日)
https://medium.com/@takafumi.endo/how-cursor-supabase-and-mcp-transform-software-development-357df8528cc7

「Manage Your Database Directly From Cline with the Supabase MCP」(Cline Blog, 2025年4月4日)
https://cline.bot/blog/manage-your-database-directly-from-cline-with-the-supabase-mcp 