---
title: ファイル・ディレクトリ操作の実践レシピ | シェルスクリプト開発ガイド
slug: file-directory-operations
status: publish
post_type: page
seo_keywords: "シェルスクリプト, ファイル操作, ディレクトリ操作, バックアップ, 一括処理"
seo_description: "シェルスクリプトによるファイル・ディレクトリ操作の実践的なレシピ集。バックアップスクリプトから一括リネームまで、日常業務で役立つ具体的な実装例を紹介します。"
tags: ["シェルスクリプト", "ファイル操作", "ディレクトリ操作", "バックアップ", "一括処理"]
image: "/images/shell-script/file-operations.png"
parent: "practical-recipes"
---

## 📁 ファイル・ディレクトリ操作の実践レシピ

ファイルやディレクトリの操作は、システム管理や日常業務で最も頻繁に必要となる処理です。シェルスクリプトを使えば、これらの操作を自動化し、効率的に処理できます。このセクションでは、実務ですぐに使えるファイル・ディレクトリ操作のレシピを紹介します。

### このカテゴリで学べる事

:::note このカテゴリで学べる事

- ファイルの存在確認とバリデーション
- 自動バックアップスクリプトの作成
- ファイルの一括リネームと移動
- 条件に基づくファイルの検索と削除
- エラーハンドリングを含んだ堅牢なファイル操作

:::

## 🎯 なぜファイル操作の自動化が重要か？

:::note ファイル操作の重要性

システム管理や開発業務では、以下のようなファイル操作が頻繁に必要です：

- **定期的なバックアップ**: データ損失を防ぐための重要なプロセス
- **ログファイルの整理**: ディスク容量の管理と運用効率の向上
- **一括処理**: 大量のファイルに対する一貫した操作
- **ファイルの検索と整理**: 特定の条件に合うファイルの管理

これらを手動で行うと時間がかかり、ヒューマンエラーの原因になります。シェルスクリプトによる自動化により、**確実性**と**効率性**を両立できます。

:::

## 📖 実践レシピ一覧

### 🔍 ファイル存在確認

[ファイル存在確認の詳細ガイド](./check-file-existence.md)

ファイルの存在確認は、スクリプトの堅牢性を確保する基本操作です。ファイルが存在するかどうか、ディレクトリかどうか、読み取り・書き込み・実行権限があるかなどを確認する方法を学びます。

**主な内容:**
- `-f`、`-d`、`-e` などのファイルテスト演算子
- 複数のファイルを同時にチェックする方法
- 存在しない場合のエラーハンドリング

```bash
# 基本的なファイル存在確認
if [ -f "/path/to/file.txt" ]; then
    echo "ファイルが存在します"
else
    echo "ファイルが存在しません"
fi
```

### 💾 バックアップスクリプト

[バックアップスクリプトの詳細ガイド](./backup-script.md)

重要なデータを自動でバックアップするスクリプトの作成方法を学びます。圧縮、ローテーション、リモート転送など、実務で使えるバックアップ戦略を網羅しています。

**主な内容:**
- `tar` を使ったアーカイブと圧縮
- 日付ベースのファイル名生成
- 古いバックアップの自動削除（ローテーション）
- rsync を使った増分バックアップ

```bash
# バックアップスクリプトの例
backup_dir="/backup/$(date +%Y%m%d_%H%M%S)"
tar -czf "$backup_dir/data.tar.gz" /data/
echo "バックアップ完了: $backup_dir"
```

### 🔄 一括リネーム

[一括リネームの詳細ガイド](./bulk-rename-files.md)

大量のファイルを効率的にリネームする方法を学びます。正規表現を使ったパターンマッチング、ファイル名の一括変換、安全なリネーム操作の実装を紹介します。

**主な内容:**
- `mv` コマンドとループ処理
- `rename` コマンドの活用
- 正規表現によるパターンマッチング
- リネーム前のバックアップと確認処理

```bash
# 拡張子の一括変更
for file in *.txt; do
    mv "$file" "${file%.txt}.md"
done
```

### 🗑️ ファイルの検索と削除

[検索と削除の詳細ガイド](./find-and-delete-files.md)

条件に基づいてファイルを検索し、不要なファイルを安全に削除する方法を学びます。`find` コマンドの高度な使い方と、安全な削除のための確認処理を紹介します。

**主な内容:**
- `find` コマンドの高度なオプション
- ファイルの更新日時、サイズ、パーミッションによる検索
- `-exec` と `xargs` を使った一括処理
- 削除前の確認と安全なバックアップ

```bash
# 30日以上更新されていないtmpファイルを削除
find /tmp -name "*.tmp" -mtime +30 -exec rm -f {} \;
```

## 🛠️ 実践的な活用シーン

### システム運用の自動化

**ログファイルのローテーション**
```bash
# 古いログファイルを圧縮して移動
find /var/log -name "*.log" -mtime +7 -exec gzip {} \;
find /var/log -name "*.log.gz" -exec mv {} /archive/logs/ \;
```

**一時ファイルのクリーンアップ**
```bash
# 一時ディレクトリの定期的なクリーンアップ
find /tmp -type f -atime +1 -delete
```

### 開発ワークフローの改善

**ビルド成果物の整理**
```bash
# 古いビルド成果物を削除
find /build -name "*.o" -o -name "*.exe" -mtime +3 -delete
```

**デプロイ前のファイル確認**
```bash
# デプロイ前に必要なファイルを確認
required_files=("config.yaml" "app.py" "requirements.txt")
for file in "${required_files[@]}"; do
    if [ ! -f "$file" ]; then
        echo "エラー: $file が見つかりません"
        exit 1
    fi
done
```

## 💡 ベストプラクティス

### 安全性の確保

1. **確認処理の実装**
   - 削除や上書き操作の前に必ず確認メッセージを表示
   - テスト環境でスクリプトを実行してから本番環境で適用

2. **バックアップの取得**
   - 大規模な操作前に必ずバックアップを実行
   - 元に戻せる仕組みを用意

3. **エラーハンドリング**
   - `set -e` を使ってエラー時にスクリプトを停止
   - 適切なログ出力とエラーメッセージ

### 効率性の向上

1. **並列処理の活用**
   - `xargs -P` を使って複数ファイルを並列処理
   - `find` の `-exec` よりも `xargs` を優先

2. **最適なコマンドの選択**
   - 単純な操作は `mv`、複雑な操作は `rename` コマンドを使用
   - 大量ファイル処理には `find` と `xargs` の組み合わせ

## 🔗 関連リンク

- [シェルスクリプトの基本構文](../basic-syntax/)
- [条件分岐とループ処理](../control-structures/)
- [エラーハンドリングのベストプラクティス](../best-practices/error-handling/)
- [デバッグ技法](../best-practices/debugging/)

## まとめ

ファイル・ディレクトリ操作の自動化は、シェルスクリプトが最も得意とする領域です。このセクションで学んだレシピを組み合わせることで、複雑なファイル管理タスクを効率的に自動化できます。

:::note 要点のまとめ

- ファイル存在確認はスクリプトの堅牢性の基本
- バックアップスクリプトはデータ保護の要
- 一括処理コマンドで作業効率を大幅に向上
- 安全性を重視したエラーハンドリングが重要
- 実践的な活用シーンで即戦力となるスキル

:::

次は、より高度な[テキスト処理の実践レシピ](../text-processing/)に進みましょう。テキスト処理スキルと組み合わせることで、さらに強力な自動化スクリプトを作成できるようになります。